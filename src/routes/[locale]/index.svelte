<script context="module" lang="ts">
	export async function load({ session, page }) {
		if (!['en', 'pt'].includes(page?.params?.locale)) {
			return {
				status: 301,
				redirect: `/en/${page.path}`
			};
		}
		if (session) {
			// Return homepage content
			return {
				props: {
					session
				}
			};
		}
	}
</script>

<script lang="ts">
	import { onMount } from 'svelte';

	import type Layout from '../../types/Layout';

	export let session: Layout;
	let scrollY;
	let loaded = false;

	onMount(() => {
		setTimeout(() => (loaded = true), 300);
	});
</script>

<section class="flex justify-center items-center flex-col banner">
	<h1 class="text-center cursor--hover">
		{@html session.content.homeTitle}
	</h1>
	<div class="overlay flex justify-center items-center">
		<div class="left flex left-0 {loaded && scrollY < 100 ? '' : 'open'}">
			<div class="curtain flex-grow" />
			<div class="gradient-bar" />
		</div>
		<div class="right flex right-0 {loaded && scrollY < 100 ? '' : 'open'}">
			<div class="gradient-bar" />
			<div class="curtain flex-grow" />
		</div>
	</div>
</section>
<section class="flex items-end bottom">
	<div class="logo-holder">
		<svg version="1.1" viewBox="0 0 187.3 55.192" id="svg12" xmlns="http://www.w3.org/2000/svg">
			<defs id="defs16" />
			<path
				class="st0"
				d="m 53.604,14.816 c -0.82021,0.3175 -1.3758,0.87312 -1.6404,1.6404 -0.26458,0.76729 -0.39688,1.9844 -0.39688,3.6777 v 26.405 c 0,1.6933 0.13229,2.9104 0.39688,3.6777 0.26458,0.76729 0.82021,1.2965 1.6404,1.6404 0.82021,0.3175 2.196,0.60854 4.1275,0.79375 v 0.74083 h -18.944 v -0.74083 c 1.905,-0.21167 3.2279,-0.47625 4.0217,-0.76729 0.79375,-0.3175 1.2965,-0.82021 1.5346,-1.561 0.2381,-0.74079 0.37042,-1.9844 0.37042,-3.7571 v -29.342 l -14.499,29.501 c 0.66146,1.0319 1.2965,1.8521 1.905,2.4342 0.60854,0.58208 1.27,1.0054 1.9844,1.27 v 0.55562 c -1.4023,0.21167 -2.6988,0.66146 -3.9158,1.3229 -1.2171,0.66146 -2.1696,1.561 -2.8575,2.6194 h -0.50271 l -18.441,-36.301 c 0.07938,2.4342 0.13229,7.0644 0.13229,13.944 v 12.356 c 0,2.5929 0.635,4.445 1.8785,5.5562 1.2435,1.1112 3.4131,1.8256 6.4558,2.1696 v 0.74083 H 2e-4 v -0.74083 c 1.9844,-0.15875 3.466,-0.52917 4.4979,-1.1112 1.0319,-0.58208 1.7462,-1.3758 2.1167,-2.4077 0.37042,-1.0319 0.58208,-2.4342 0.58208,-4.2069 v -22.966 c 0,-1.9315 -0.18521,-3.4131 -0.58208,-4.4715 C 6.21792,16.42988 5.53,15.63608 4.5246,15.10698 3.5192,14.57781 2.0111,14.2074 2e-4,13.99578 v -0.74083 h 13.15 l 16.034,31.724 0.18521,0.3175 15.796,-32.041 h 12.594 v 0.74083 c -1.9315,0.21167 -3.3338,0.47625 -4.154,0.82021 z"
				style="stroke-width:0.26458"
				id="path2"
			/>
			<path
				class="st0"
				d="m 65.722,51.831 c 0.82021,-0.3175 1.3758,-0.82021 1.6404,-1.5081 0.26458,-0.68792 0.39688,-1.7992 0.39688,-3.3602 v -27.279 c 0,-1.561 -0.13229,-2.6723 -0.39688,-3.3602 -0.26458,-0.68792 -0.82021,-1.1906 -1.6404,-1.5081 -0.82021,-0.3175 -2.196,-0.60854 -4.1275,-0.79375 v -0.74083 h 19.129 v 0.74083 c -1.9315,0.21167 -3.3073,0.47625 -4.1275,0.79375 -0.82021,0.3175 -1.3494,0.82021 -1.614,1.5081 -0.23812,0.68792 -0.37042,1.7992 -0.37042,3.3602 v 27.279 c 0,1.561 0.13229,2.6723 0.37042,3.3602 0.23813,0.6879 0.79375,1.1906 1.614,1.5081 0.82021,0.3175 2.196,0.60854 4.1275,0.79375 v 0.74083 h -19.129 v -0.74083 c 1.905,-0.18521 3.2808,-0.44979 4.1275,-0.79375 z"
				style="stroke-width:0.26458"
				id="path4"
			/>
			<path
				class="st0"
				d="m 129.12,15.107 c -1.0583,0.58208 -1.7727,1.3758 -2.1696,2.4077 -0.39687,1.0319 -0.58208,2.4342 -0.58208,4.2069 v 25.665 c 0.79375,0.87312 1.561,1.5081 2.3019,1.905 0.76729,0.42333 1.6404,0.74083 2.6194,0.97896 v 0.55562 c -1.5346,0.3175 -2.7252,0.82021 -3.6512,1.5081 -0.89959,0.68792 -1.7992,1.6404 -2.6458,2.8575 h -0.5027 l -31.485,-36.221 c 0.07937,3.0427 0.13229,7.5671 0.13229,13.573 v 12.356 c 0,2.54 0.68792,4.3921 2.0373,5.5562 1.3494,1.1642 3.5719,1.8785 6.6675,2.1696 v 0.74083 h -17.33 v -0.74083 c 1.9844,-0.15875 3.4925,-0.52917 4.5244,-1.1112 1.0583,-0.58208 1.7727,-1.3758 2.196,-2.4077 0.42333,-1.0319 0.60854,-2.4342 0.60854,-4.2069 v -22.966 c 0,-1.9315 -0.18521,-3.4131 -0.58208,-4.4715 -0.39688,-1.0583 -1.0848,-1.8521 -2.0902,-2.3812 -1.0054,-0.52917 -2.5135,-0.89958 -4.5244,-1.1112 v -0.74083 h 12.277 l 28.152,32.702 c -0.0529,-3.0427 -0.0529,-7.1173 -0.0529,-12.224 v -11.483 c 0,-2.831 -0.66146,-4.8683 -1.9844,-6.059 -1.3229,-1.1906 -3.519,-1.9315 -6.6146,-2.2225 v -0.74083 h 17.224 v 0.74083 c -1.9579,0.23812 -3.466,0.60854 -4.5244,1.1642 z"
				style="stroke-width:0.26458"
				id="path6"
			/>
			<path
				class="st0"
				d="m 180.39,49.609 c 0.66146,0.89958 1.5081,1.5875 2.5665,2.0638 1.0583,0.47625 2.4871,0.79375 4.3392,0.9525 v 0.74083 h -20.373 V 52.6253 c 1.905,-0.05292 3.2279,-0.29104 4.0217,-0.76729 0.7938,-0.47625 1.1642,-1.1377 1.1642,-2.0108 0,-0.74083 -0.42334,-2.0108 -1.2965,-3.8365 l -2.4606,-5.1329 h -20.849 l -1.5346,3.2015 c -0.68791,1.4817 -1.0583,2.7252 -1.0583,3.7042 0,1.4288 0.58208,2.5665 1.7462,3.3867 1.1642,0.82021 2.884,1.2965 5.1594,1.4288 v 0.74083 h -17.701 v -0.74083 c 1.7727,-0.21167 3.2279,-0.58208 4.3392,-1.1377 1.1113,-0.55562 2.1431,-1.3758 3.0162,-2.4871 0.87312,-1.1112 1.8521,-2.6988 2.9369,-4.7625 l 12.594,-26.167 c -0.60854,-0.74083 -1.2965,-1.2965 -2.0373,-1.6933 -0.74084,-0.39688 -1.7198,-0.66146 -2.9104,-0.82021 v -0.60854 c 3.6512,-0.29104 6.6146,-1.5081 8.89,-3.6512 h 0.50271 l 16.669,34.264 c 0.84666,1.8256 1.614,3.175 2.2754,4.0746 z m -12.594,-9.9219 -8.5725,-17.833 c -0.60854,-1.2435 -1.0848,-2.0902 -1.4288,-2.5929 l -9.7631,20.426 z m -13.838,-30.745 -0.68792,-1.1112 15.002,-7.8317 0.68791,1.1112 z"
				style="stroke-width:0.26458"
				id="path8"
			/>
		</svg>
		<h2>
			{@html session.content.slogan}
		</h2>
	</div>
</section>

<svelte:window bind:scrollY />

<style lang="scss">
	.banner {
		position: relative;
		height: 60vh;
		width: 100%;
		overflow-x: hidden;
		.overlay {
			position: absolute;
			height: 100%;
			width: 100%;
			z-index: 5;
			.left,
			.right {
				height: 60vh;
				width: 20%;
				position: absolute;
				transition: width 1s ease-in-out;
				&.open {
					width: 160%;
				}
			}
			.left .gradient-bar {
				transform: translate(-1rem, -1rem) rotate(60deg);
			}
			.right .gradient-bar {
				transform: translate(2rem, 9rem) rotate(60deg);
			}
			.gradient-bar {
				width: 2rem;
				height: 40vh;
				background: rgb(167, 98, 211);
				background: linear-gradient(0deg, rgba(167, 98, 211, 1) 0%, rgba(79, 231, 193, 1) 100%);
				z-index: 10;
			}
			.curtain {
				transition: background-color 0.4s ease-in-out;
				background-color: var(--bg-color);
				width: 100%;
				height: 100%;
			}
		}
	}
	.bottom {
		height: 50vh;
		.logo-holder {
			width: 28rem;
			max-width: 70%;
			margin: 2rem;
			svg {
				width: 100%;
				fill: var(--color);
			}
			h2 {
				margin-top: 2rem;
				font-weight: 100;
				font-size: 1.6rem;
				line-height: 1.7rem;
			}
		}
	}
	@media (max-width: 576px) {
		.banner h1 {
			font-size: 1.2rem;
		}
		.bottom .logo-holder h2 {
			margin-top: 1rem;
			font-size: 1rem;
		}
		.banner .overlay {
			.left,
			.right {
				transition: width 0.4s ease-in-out;
			}
		}
	}
</style>
